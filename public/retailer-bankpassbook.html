<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>RA Digital India Pan Center</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .fade-in {
      animation: fadeIn 0.5s ease-out forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
  </style>
</head>
<body class="bg-gray-100 p-6">

<!-- ЁЯМР Navbar -->
<nav class="bg-gray-900 text-white shadow-lg">
  <div class="max-w-7xl mx-auto px-4">
    <div class="flex justify-between items-center h-16">
      <div class="text-xl font-bold">
        <a href="retailer-dashboard.html" class="text-white">RA DIGITAL INDIA PORTAL</a>
      </div>
      <div class="hidden md:flex items-center space-x-6">
        <a href="retailer-dashboard.html" class="hover:text-blue-400">Home</a>
        <a href="retailer-profile.html" class="hover:text-blue-400">Profile</a>
        <div class="relative group">
          <button class="hover:text-blue-400">Services</button>
          <div class="absolute hidden group-hover:block bg-white text-black mt-2 rounded shadow-lg w-56 z-50">
            <a href="retailer-New-PAN-Card-Dashboard.html" class="block px-4 py-2 hover:bg-gray-100">PAN Apply A49</a>
            <a href="retailer-corruption-pan-cardappy.html" class="block px-4 py-2 hover:bg-gray-100">Correction PAN</a>
            <a href="retailer-PAN-card-new-upload.html" class="block px-4 py-2 hover:bg-gray-100">Upload Document</a>
            <a href="PAN card slip download.html" class="block px-4 py-2 hover:bg-gray-100">PAN Card Status</a>
          </div>
        </div>
        <a href="retailer-pan-pammid.html" class="hover:text-blue-400">PAN Altruist ID</a>
        <a href="/logout" class="hover:text-red-400">Logout</a>
      </div>
    </div>
  </div>
</nav>

<!-- ЁЯФФ Auto Modal -->
<!-- ЁЯФФ Auto Modal -->
<div id="infoModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
  <div class="bg-white max-w-xl w-full p-6 rounded-lg shadow-lg fade-in">
    <h2 class="text-xl font-bold text-red-700 mb-4">ЁЯФФ рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ</h2>
    <div class="text-gray-800 text-sm leading-relaxed space-y-3">
      <p>рдЕрдЧрд░ рдЖрдк <strong>BANK PASSBOOK</strong> рднрд░ рд░рд╣реЗ рд╣реИрдВ рддреЛ рдХреГрдкрдпрд╛ рдзреНрдпрд╛рдирдкреВрд░реНрд╡рдХ рд╕рднреА рдЬрд╛рдирдХрд╛рд░рд┐рдпрд╛рдБ рднрд░реЗрдВред</p>
      <p>тЪая╕П <strong>рдЧрд▓рдд рдбреЗрдЯ, рдЕрдХрд╛рдЙрдВрдЯ рдирдВрдмрд░, рдпрд╛ IFSC рдХреЛрдб</strong> рднрд░рдиреЗ рдкрд░ рдЖрдкрдХрд╛ рднреБрдЧрддрд╛рди рд╕рдлрд▓ рдирд╣реАрдВ рд╣реЛрдЧрд╛ред</p>
      <p>ЁЯТб рдХреГрдкрдпрд╛ <strong>PDF рд╕рд╣реА рдФрд░ рд╕реНрдкрд╖реНрдЯ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ</strong>ред</p>
      <p>тЬЕ рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рджреА рдЧрдИ рдЬрд╛рдирдХрд╛рд░реА рд╕рддреНрдп рдФрд░ рдмреИрдВрдХ рд░рд┐рдХреЙрд░реНрдб рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред</p>
      <p>тЭМ рдЕрдЧрд░ рдЬрд╛рдирдХрд╛рд░реА рдореЗрдВ рдЧрдбрд╝рдмрдбрд╝реА рд╣реБрдИ рддреЛ рдЖрдкрдХрд╛ рднреБрдЧрддрд╛рди рдЖрдкрдХреЗ рдЦрд╛рддреЗ рдореЗрдВ рдирд╣реАрдВ рдорд┐рд▓ рдкрд╛рдПрдЧрд╛ред</p>
    </div>
    <div class="mt-6 text-right">
      <button onclick="closeModal()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded">
        рдореИрдВ рд╕рдордЭ рдЧрдпрд╛
      </button>
    </div>
  </div>
</div>


<!-- ЁЯз╛ NSDL PAMM ID  Form -->
<div class="max-w-5xl mx-auto p-6 bg-white rounded shadow-md space-y-6 mt-4">
  <h2 class="text-2xl font-semibold text-gray-800">PAN CARD KI SALARY</h2>
  <form class="space-y-4" id="bankpassbook" enctype="multipart/form-data">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <input name="fullname" class="p-2 border rounded" placeholder="Full Name" required />
      <input name="username" class="p-2 border rounded" placeholder="Username" required />
    </div>
    <input name="fulladdress" class="p-2 border rounded w-full" placeholder="Full Address" required />
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <input name="accountType" class="p-2 border rounded" placeholder="Account Number" required />
      <input name="ifsc" class="p-2 border rounded" placeholder="IFSC Code" required />
      <select name="state" class="p-2 border rounded" required>
        <option value="">--Select State--</option>
        <option>Delhi</option>
        <option>Maharashtra</option>
        <option>Uttar Pradesh</option>
        <option>Bihar</option>
      </select>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <input name="pin" maxlength="6" class="p-2 border rounded" placeholder="PIN Code" required />
      <input name="shopname" class="p-2 border rounded" placeholder="Shop Name" required />
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <input name="mobile" class="p-2 border rounded" placeholder="Mobile Number" required />
      <input name="email" type="email" class="p-2 border rounded" placeholder="Email" required />
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <input name="aadhaar" class="p-2 border rounded" placeholder="Aadhaar Number" required />
      <input name="pan" class="p-2 border rounded" placeholder="PAN Number" required />
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <select name="bank-name" id="bank-name" class="p-2 border rounded" required>
        <option value="">--Select Account Type--</option>
        <option value="sbi">STATE BANK OF INDIA</option>
        <option value="unionbank">UNION BANK OF INDIA</option>
        <option value="PUNBNABANK">PUNJAB NATIONAL BANK</option>
      </select>
    </div>
    <!-- тЬЕ PDF Upload Input -->
    <div class="grid grid-cols-1">
      <label class="block text-sm font-medium text-gray-700">Upload PDF Document</label>
      <input name="pdfFile" type="file" accept="application/pdf" class="mt-1 p-2 border rounded bg-white" required>
    </div>
    <button type="submit" class="bg-blue-600 text-white p-2 rounded w-full hover:bg-blue-700">Create Now</button>
  </form>
</div>

<!-- ЁЯТб Scripts -->
<script>
  document.getElementById('bankpassbook').addEventListener('submit', async function (e) {
    e.preventDefault();
    const form = e.target;
    const formData = new FormData(form); // Send as multipart/form-data

    try {
      const res = await fetch('/create-bankpassbook', {
        method: 'POST',
        body: formData,
      });
      const result = await res.json();
      alert(result.message);
      form.reset();
      loadPsaData();
    } catch (err) {
      console.error(err);
      alert('Submission failed!');
    }
  });

  async function loadPsaData() {
    try {
      const res = await fetch('/all/get-psa');
      const data = await res.json();
      const tableBody = document.querySelector('#psaTable tbody');
      tableBody.innerHTML = '';
      data.forEach(psa => {
        const row = `
          <tr>
            <td class="border px-2 py-1">${psa.fullname}</td>
            <td class="border px-2 py-1">${psa.username}</td>
            <td class="border px-2 py-1">${psa.mobile}</td>
            <td class="border px-2 py-1">${psa.email}</td>
            <td class="border px-2 py-1">${psa.accountType}</td>
          </tr>
        `;
        tableBody.insertAdjacentHTML('beforeend', row);
      });
    } catch (err) {
      console.error('Failed to load PSA data:', err);
    }
  }

  window.onload = () => {
    setTimeout(() => {
      document.getElementById('infoModal').classList.remove('hidden');
    }, 1000);
  };

  function closeModal() {
    document.getElementById('infoModal').classList.add('hidden');
  }
</script>

</body>
</html>
